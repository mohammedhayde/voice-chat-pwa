# ๐ ุฏููู ุชูุงูู ูุธุงู ุงููุตุงุฏูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุตุงุฏูุฉ ูุงูู ููุชุทุจูู ูุนุชูุฏ ุนูู ุงูู API ุงูููุซู.

## ๐ ุงููููุงุช ุงููุถุงูุฉ

### 1. **lib/authService.ts**
ุฎุฏูุฉ ุงููุตุงุฏูุฉ ุงูุชู ุชุชุตู ุจุงูู API:
- `register()` - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- `login()` - ุชุณุฌูู ุงูุฏุฎูู
- `guestLogin()` - ุชุณุฌูู ุฏุฎูู ูุถูู
- `logout()` - ุชุณุฌูู ุงูุฎุฑูุฌ
- `refreshAccessToken()` - ุชุญุฏูุซ ุงูู Token
- `changePassword()` - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- `fetchWithAuth()` - ุทูุจ API ูุน ูุนุงูุฌุฉ ุชููุงุฆูุฉ ููู Token

### 2. **contexts/AuthContext.tsx**
Context ูุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุณุชุฎุฏู:
- ุฅุฏุงุฑุฉ ูุนูููุงุช ุงููุณุชุฎุฏู ุงููุณุฌู
- ุชุญุฏูุซ ุชููุงุฆู ููู Token ูู 10 ุฏูุงุฆู
- ุชูููุฑ ุฏูุงู `logout()` ู `refreshUser()`

### 3. **app/login/page.tsx**
ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู:
- ูููุฐุฌ ุชุณุฌูู ุฏุฎูู ุจุงุณู ุงููุณุชุฎุฏู/ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุฎูุงุฑ ุชุณุฌูู ุฏุฎูู ูุถูู
- ุฑุงุจุท ููุชุณุฌูู

### 4. **app/register/page.tsx**
ุตูุญุฉ ุงูุชุณุฌูู:
- ูููุฐุฌ ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
- ุงูุชุญูู ูู ููุฉ ูููุฉ ุงููุฑูุฑ
- ุนุฑุถ ุฃุฎุทุงุก ุงูุฅุฏุฎุงู ูุจุงุดุฑุฉ

### 5. **app/page.tsx (ูุญุฏุซ)**
ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
- ุญูุงูุฉ ุงููุตูู (ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู)
- ุนุฑุถ ุงุณู ุงููุณุชุฎุฏู ุงููุณุฌู
- ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ
- ุฅุฒุงูุฉ ุตูุฏูู ุฅุฏุฎุงู ุงูุงุณู (ูุณุชุฎุฏู ุงุณู ุงููุณุชุฎุฏู ุงููุณุฌู ุชููุงุฆูุงู)

### 6. **app/layout.tsx (ูุญุฏุซ)**
- ุฅุถุงูุฉ `AuthProvider` ูุชูููุฑ ุญุงูุฉ ุงููุตุงุฏูุฉ ูุฌููุน ุงูุตูุญุงุช

## ๐ง ุงูุฅุนุฏุงุฏ

### 1. ุชุญุฏูุฏ ุนููุงู API

ุงูุชุญ ููู `.env.local` ูุฃุถู:

```env
# Authentication API URL
NEXT_PUBLIC_API_URL=https://your-domain.com/api/auth
```

ุงุณุชุจุฏู `https://your-domain.com` ุจุนููุงู ุงูู backend ุงูุฎุงุต ุจู.

### 2. ุชุซุจูุช ุงูููุชุจุงุช

ุชู ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ:
- โ `jsonwebtoken` - ููุชุนุงูู ูุน JWT
- โ `bcryptjs` - ูุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- โ `uuid` - ูุชูููุฏ ูุนุฑูุงุช ูุฑูุฏุฉ

## ๐ ุงูุงุณุชุฎุฏุงู

### ุชุฏูู ุงููุตุงุฏูุฉ

1. **ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ:**
   - ูุฒูุฑ `/register`
   - ูููุฃ ุงููููุฐุฌ (ุงุณู ุงููุณุชุฎุฏูุ ุงูุจุฑูุฏุ ูููุฉ ุงููุฑูุฑ)
   - ูุชู ุชุณุฌููู ูุชุญูููู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ

2. **ุงููุณุชุฎุฏู ุงููุณุฌู:**
   - ูุฒูุฑ `/login`
   - ูุฏุฎู ุงุณู ุงููุณุชุฎุฏู/ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
   - ูุชู ุชุณุฌูู ุฏุฎููู ูุชุญูููู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ

3. **ุงูุถูู:**
   - ูุฒูุฑ `/login`
   - ูุถุบุท "ุฏุฎูู ูุถูู"
   - ูุชู ุชุณุฌููู ุชููุงุฆูุงู ุจุงุณู `Guest_XXXXX`

4. **ุฏุงุฎู ุงูุชุทุจูู:**
   - ูุฎุชุงุฑ ุบุฑูุฉ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
   - ูุฏุฎู ุงูุบุฑูุฉ ูุจุงุดุฑุฉ (ุงุณูู ุงููุณุฌู ูุธูุฑ ุชููุงุฆูุงู)
   - ููููู ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุงูุฒุฑ ูู ุงูุฃุนูู

## ๐ ุงูุฃูุงู

### ุญูุงูุฉ ุงูุตูุญุงุช

ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`/`) ูุญููุฉ ุชููุงุฆูุงู:
- ุฅุฐุง ูู ููู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูููุ ูุชู ุชุญูููู ูู `/login`
- ูุชู ุงูุชุญูู ูู ุงูู Token ุนูุฏ ูู ุทูุจ

### ุชุญุฏูุซ Token ุชููุงุฆู

- ูุชู ุชุญุฏูุซ ุงูู Access Token ูู 10 ุฏูุงุฆู ุชููุงุฆูุงู
- ุนูุฏ ุงูุชูุงุก ุงูู Refresh Tokenุ ููุทูุจ ูู ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู

### ุชุฎุฒูู ุขูู

- ุงูู Tokens ูุฎุฒูุฉ ูู `localStorage`
- ููุฅูุชุงุฌ: ูููุตุญ ุจุงุณุชุฎุฏุงู `httpOnly cookies`

## ๐ก API Endpoints ุงููุณุชุฎุฏูุฉ

ุญุณุจ ุงูุชูุซูู ุงููููุฏู:

| Endpoint | ุงููุธููุฉ |
|----------|---------|
| `POST /api/auth/register` | ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ |
| `POST /api/auth/login` | ุชุณุฌูู ุงูุฏุฎูู |
| `POST /api/auth/guest-login` | ุชุณุฌูู ุฏุฎูู ูุถูู |
| `POST /api/auth/refresh-token` | ุชุญุฏูุซ Access Token |
| `POST /api/auth/logout` | ุชุณุฌูู ุงูุฎุฑูุฌ |
| `POST /api/auth/change-password` | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ |

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุชุดุบูู ุงููุดุฑูุน

```bash
npm run dev
```

### 2. ุฒูุงุฑุฉ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

ุงูุชุญ http://localhost:3000

ุณูุชู ุชุญูููู ุชููุงุฆูุงู ูู `/login`

### 3. ุงูุชุณุฌูู

- ุงููุฑ "ุณุฌู ุงูุขู"
- ุงููุฃ ุงููููุฐุฌ
- ุณูุชู ุชุณุฌููู ูุชุญูููู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ

### 4. ุงุฎุชุจุงุฑ ุงูุฏุฎูู ูุถูู

- ูู ุตูุญุฉ `/login`ุ ุงุถุบุท "ุฏุฎูู ูุถูู"
- ุณูุชู ุฅูุดุงุก ุญุณุงุจ ุถูู ุชููุงุฆูุงู

## ๐ ุชุฏูู ุงูุจูุงูุงุช

```
โโโโโโโโโโโโโโโโโโโ
โ   ุงููุณุชุฎุฏู      โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  Login/Register โ
โ     Page        โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  authService    โ โโโโโโโบ POST /api/auth/login
โโโโโโโโโโฌโโโโโโโโโ         POST /api/auth/register
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  localStorage   โ โโโโโโโ accessToken
โ                 โ โโโโโโโ refreshToken
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ  AuthContext    โ โโโโโโโบ Auto-refresh every 10 min
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ   Home Page     โ โโโโโโโบ Protected (requires auth)
โ  (Room Select)  โ
โโโโโโโโโโโโโโโโโโโ
```

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **Backend ูุทููุจ:**
   - ูุฌุจ ุฃู ูููู ูุฏูู backend ูุฏุนู ุงูู API endpoints ุงูููุซูุฉ
   - ุชุฃูุฏ ูู ุชุนููู `NEXT_PUBLIC_API_URL` ุจุดูู ุตุญูุญ

2. **CORS:**
   - ูุฌุจ ุฃู ูุณูุญ ุงูู backend ุจุทูุจุงุช ูู domain ุงูุชุทุจูู

3. **ููุฅูุชุงุฌ:**
   - ุงุณุชุฎุฏู HTTPS ููุท
   - ุงุณุชุฎุฏู httpOnly cookies ุจุฏูุงู ูู localStorage
   - ูุนูู rate limiting ุนูู ุงูู backend

## ๐จ ุงูุชุฎุตูุต

### ุชุบููุฑ ูุฏุฉ ุตูุงุญูุฉ Token

ูู `contexts/AuthContext.tsx`:

```typescript
// ุชุบููุฑ ูู 10 ุฏูุงุฆู ุฅูู ุงููุฏุฉ ุงููุฑุบูุจุฉ
const refreshInterval = setInterval(async () => {
  // ...
}, 10 * 60 * 1000); // โ ุบููุฑ ููุง
```

### ุชุฎุตูุต ุฑุณุงุฆู ุงูุฎุทุฃ

ูู `lib/authService.ts`:

```typescript
if (!response.ok) {
  throw new Error(data.message || 'ุฑุณุงูุฉ ุงูุฎุทุฃ ุงููุฎุตุตุฉ'); // โ ุบููุฑ ููุง
}
```

## ๐ ุงููููุฒุงุช ุงูุฅุถุงููุฉ ุงูููููุฉ

ูููู ุฅุถุงูุฉ:
- โ ุตูุญุฉ ุงูููู ุงูุดุฎุตู (`/profile`)
- โ ุตูุญุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- โ ุตูุญุฉ ูุณูุช ูููุฉ ุงููุฑูุฑ
- โ ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุงููุตุงุฏูุฉ ุจูุงุณุทุฉ OAuth (Google, Facebook, etc.)

## ๐ ุงููุณุงุนุฏุฉ

ูู ุญุงู ูุงุฌูุชู ูุดุงูู:

1. ุชุญูู ูู console ุงููุชุตูุญ ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุฃู ุงูู backend ูุนูู ุจุดูู ุตุญูุญ
3. ุชุญูู ูู ุฃู `NEXT_PUBLIC_API_URL` ุตุญูุญ
4. ุชุญูู ูู ุฃู CORS ููุนูู ูู ุงูู backend

---

ุตูุน ุจู โค๏ธ ูููุดุฑูุน
