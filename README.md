# ๐๏ธ ุฏุฑุฏุดุฉ ุตูุชูุฉ ุฌูุงุนูุฉ PWA

ุชุทุจูู Progressive Web App (PWA) ููุฏุฑุฏุดุฉ ุงูุตูุชูุฉ ุงูุฌูุงุนูุฉ ุจุงุณุชุฎุฏุงู **Next.js 16** ู **Agora RTC SDK**.

## โจ ุงููููุฒุงุช

- ๐ค **ุฏุฑุฏุดุฉ ุตูุชูุฉ ูู ุงูููุช ุงููุนูู** - ุงุณุชุฎุฏุงู Agora RTC SDK ููุงุชุตุงู ุงูุตูุชู ุนุงูู ุงูุฌูุฏุฉ
- ๐ฑ **PWA** - ูููู ุชุซุจูุชู ุนูู ุงููุงุชู ุฃู ุงูููุจููุชุฑ
- ๐ **ูุนูู ุจุฏูู ุงุชุตุงู** - ุฏุนู Service Worker ููุนูู ุฏูู ุงุชุตุงู
- ๐จ **ูุงุฌูุฉ ูุณุชุฎุฏู ุฌูููุฉ** - ุชุตููู ุนุตุฑู ุจุงุณุชุฎุฏุงู Tailwind CSS
- ๐ **ุฅุฏุงุฑุฉ ุงูุตูุช** - ูุชู ูุฅูุบุงุก ูุชู ุงููููุฑูููู
- ๐ฅ **ูุชุนุฏุฏ ุงููุณุชุฎุฏููู** - ุฏุนู ุนุฏุฏ ุบูุฑ ูุญุฏูุฏ ูู ุงููุดุงุฑููู
- ๐ **ุฏุนู ุงูุนุฑุจูุฉ** - ูุงุฌูุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุจุงููุงูู
- โก **ุฃุฏุงุก ุนุงูู** - ูุจูู ุนูู Next.js 16 ูุน React 19

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### ุงููุชุทูุจุงุช

- Node.js 18+ ู npm
- ุญุณุงุจ ูู [Agora.io](https://www.agora.io/)

### ุงูุชุซุจูุช

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน**
```bash
cd voice-chat-pwa
```

2. **ุชุซุจูุช ุงูููุชุจุงุช**
```bash
npm install
```

3. **ุงูุญุตูู ุนูู Agora App ID**
   - ุณุฌู ุญุณุงุจ ูุฌุงูู ูู [Agora Console](https://console.agora.io/)
   - ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ
   - ุงูุณุฎ ุงูู App ID
   - **ููู ููุงุฎุชุจุงุฑ:** ุนุทูู "Enable Primary Certificate" ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน:
     1. ุงุฐูุจ ุฅูู Project Management
     2. ุงุถุบุท ุนูู ุฒุฑ Configure ุจุฌุงูุจ ูุดุฑูุนู
     3. ุงุจุญุซ ุนู "Primary Certificate"
     4. ุนุทูู ุงูุฎูุงุฑ "Enable Primary Certificate"
     5. ุงุญูุธ ุงูุชุบููุฑุงุช

4. **ุชุดุบูู ุงูุชุทุจูู**
```bash
npm run dev
```

5. **ูุชุญ ุงููุชุตูุญ**
   ุงูุชุญ [http://localhost:3000](http://localhost:3000)

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

1. ุฃุฏุฎู **App ID** ูู Agora Console
2. ุฃุฏุฎู **ุงุณู ุงูููุงุฉ** (ูุซู: room-123)
3. (ุงุฎุชูุงุฑู) ุฃุฏุฎู **Token** ููุฃูุงู ูู ุงูุฅูุชุงุฌ
4. ุงุถุบุท **"ุงุจุฏุฃ ุงูุฏุฑุฏุดุฉ"**
5. ุงุณูุญ ูููุชุตูุญ ุจุงููุตูู ุฅูู ุงููููุฑูููู
6. ุดุงุฑู ุงุณู ุงูููุงุฉ ูุน ุฃุตุฏูุงุฆู ููุงูุถูุงู

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

```
voice-chat-pwa/
โโโ app/
โ   โโโ layout.tsx          # ุงูุชุฎุทูุท ุงูุฑุฆูุณู ูุน ุฅุนุฏุงุฏุงุช PWA
โ   โโโ page.tsx            # ุตูุญุฉ ุงูุฅุฏุฎุงู ูุงูุจุฏุก
โ   โโโ globals.css         # ุงูุชูุณููุงุช ุงูุนุงูุฉ
โโโ components/
โ   โโโ VoiceChatRoom.tsx   # ูููู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ุงูุตูุชูุฉ
โโโ hooks/
โ   โโโ useAgoraVoice.ts    # React Hook ูุฅุฏุงุฑุฉ Agora SDK
โโโ public/
โ   โโโ manifest.json       # ููู PWA Manifest
โโโ next.config.ts          # ุฅุนุฏุงุฏุงุช Next.js ูุน PWA
โโโ package.json
```

## ๐ฏ ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### `useAgoraVoice` Hook
React Hook ูุฎุตุต ูุฅุฏุงุฑุฉ:
- ุงูุงุชุตุงู ุจููุงุฉ Agora
- ุฅุฏุงุฑุฉ ุงููุณุงุฑุงุช ุงูุตูุชูุฉ ุงููุญููุฉ ูุงูุจุนูุฏุฉ
- ูุชู/ุฅูุบุงุก ูุชู ุงููููุฑูููู
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุงุชุตุงู

### `VoiceChatRoom` Component
ูููู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ูุน:
- ุนุฑุถ ุงููุดุงุฑููู ูู ุงูููุช ุงููุนูู
- ุนูุงุตุฑ ุงูุชุญูู ูู ุงูุตูุช
- ูุคุดุฑุงุช ุญุงูุฉ ุงูุงุชุตุงู
- ุชุตููู ูุชุฌุงูุจ

## ๐ ุงูุฃูุงู

ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ:
- ุงุณุชุฎุฏู **Token Authentication** ูู Agora
- ูู ุจุฅูุดุงุก ุฎุงุฏู ูุชูููุฏ Tokens
- ูุง ุชุนุฑุถ App ID ู Secret ูู ุงูููุฏ ุงูุฃูุงูู

## ๐ฑ ุชุซุจูุช PWA

### ุนูู Android:
1. ุงูุชุญ ุงูุชุทุจูู ูู Chrome
2. ุงุถุบุท ุนูู ุงููุงุฆูุฉ (โฎ)
3. ุงุฎุชุฑ "ุชุซุจูุช ุงูุชุทุจูู"

### ุนูู iOS:
1. ุงูุชุญ ุงูุชุทุจูู ูู Safari
2. ุงุถุบุท ุนูู ุฒุฑ ุงููุดุงุฑูุฉ
3. ุงุฎุชุฑ "ุฅุถุงูุฉ ุฅูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ"

### ุนูู ุงูููุจููุชุฑ:
1. ุงูุชุญ ุงูุชุทุจูู ูู Chrome/Edge
2. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุซุจูุช ูู ุดุฑูุท ุงูุนููุงู
3. ุฃู ุงุณุชุฎุฏู ุงููุงุฆูุฉ: ุงููุฒูุฏ ูู ุงูุฃุฏูุงุช > ุชุซุจูุช

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Next.js 16** - ุฅุทุงุฑ ุนูู React ููุฅูุชุงุฌ
- **React 19** - ููุชุจุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู
- **TypeScript** - ููุชุงุจุฉ ููุฏ ุขูู
- **Agora RTC SDK** - ููุงุชุตุงู ุงูุตูุชู ูู ุงูููุช ุงููุนูู
- **Tailwind CSS** - ููุชูุณููุงุช
- **next-pwa** - ูุชุญููู ุงูุชุทุจูู ุฅูู PWA

## ๐จ ุงูุชุฎุตูุต

### ุชุบููุฑ ุงูุฃููุงู
ุนุฏูู ุงูุฃููุงู ูู `components/VoiceChatRoom.tsx` ู `app/page.tsx`

### ุชุบููุฑ ุฃููููุฉ ุงูุชุทุจูู
ุงุณุชุจุฏู ุงูุฃููููุงุช ูู ูุฌูุฏ `public/`:
- `icon-192x192.png`
- `icon-512x512.png`

### ุชุบููุฑ ุฅุนุฏุงุฏุงุช PWA
ุนุฏูู `public/manifest.json` ู `next.config.ts`

## ๐ ุงูุจูุงุก ููุฅูุชุงุฌ

```bash
# ุจูุงุก ุงูุชุทุจูู
npm run build

# ุชุดุบูู ุงููุณุฎุฉ ุงูุฅูุชุงุฌูุฉ
npm start
```

## ๐ ูุชุทูุจุงุช ุงููุชุตูุญ

ูููุตูู ุฅูู ุงููููุฑููููุ ูุฌุจ ุชููุฑ ุงูุดุฑูุท ุงูุชุงููุฉ:

### ุงููุชุตูุญุงุช ุงููุฏุนููุฉ
- โ **Google Chrome** 74+ (ุงูุฃูุถู)
- โ **Microsoft Edge** 79+
- โ **Safari** 11+
- โ **Firefox** 62+
- โ๏ธ **Opera** 62+
- โ ุงููุชุตูุญุงุช ุงููุฏููุฉ ุบูุฑ ูุฏุนููุฉ

### ูุชุทูุจุงุช ุงูุฃูุงู (HTTPS)
`getUserMedia()` ูุนูู ููุท ูู ุงูุณูุงูุงุช ุงูุขููุฉ:
- โ `https://` - ููููุงูุน ุงูููุดูุฑุฉ
- โ `localhost` - ููุชุทููุฑ ุงููุญูู
- โ `127.0.0.1` - ููุชุทููุฑ ุงููุญูู
- โ `http://` - ุบูุฑ ูุณููุญ (ูุง ุนุฏุง localhost)

**ููุงุญุธุฉ:** ุฅุฐุง ููุช ุชูุดุฑ ุงูุชุทุจูู ุนูู ุงูุฅูุชุฑูุชุ ูุฌุจ ุงุณุชุฎุฏุงู HTTPS.

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ "navigator.mediaDevices is undefined"

ูุฐุง ูุนูู ุฃู ุงููุชุตูุญ ูุง ูุฏุนู ุงููุตูู ูููููุฑูููู ุฃู ุฃู ุงูุตูุญุฉ ุบูุฑ ุขููุฉ.

**ุงูุญููู:**
1. **ุงุณุชุฎุฏู ูุชุตูุญ ุญุฏูุซ:**
   - ุญุฏูุซ ูุชุตูุญู ูุขุฎุฑ ุฅุตุฏุงุฑ
   - ุฌุฑุจ Google Chrome ุฃู Microsoft Edge

2. **ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู HTTPS ุฃู localhost:**
   - ููุชุทููุฑ: ุงุณุชุฎุฏู `http://localhost:3000`
   - ููุฅูุชุงุฌ: ูุฌุจ ุงุณุชุฎุฏุงู `https://`
   - ูุง ุชุณุชุฎุฏู ุนููุงู IP ูุน HTTP (ูุซู `http://192.168.1.5`)

3. **ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ:**
   - ุจุนุถ ุงููุชุตูุญุงุช ุชุญุธุฑ ุงููุตูู ูููููุฑูููู ุงูุชุฑุงุถูุงู
   - ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ ูุงูุฃูุงู

### ุฎุทุฃ "CAN_NOT_GET_GATEWAY_SERVER" ุฃู "Token required"
ูุฐุง ูุนูู ุฃู ูุดุฑูุน Agora ุงูุฎุงุต ุจู ูุชุทูุจ Token ููุฃูุงู.

**ุงูุญู ุงูุณุฑูุน ููุงุฎุชุจุงุฑ:**
1. ุงุฐูุจ ุฅูู [Agora Console](https://console.agora.io/)
2. ุงุฎุชุฑ ูุดุฑูุนู ูู Project Management
3. ุงุถุบุท ุนูู Configure
4. ุนุทูู "Enable Primary Certificate"
5. ุงุญูุธ ูุงุฎุชุจุฑ ุงูุชุทุจูู ูุฑุฉ ุฃุฎุฑู

**ููุฅูุชุงุฌ:**
- ุงุญุชูุธ ุจู "Enable Primary Certificate" ูููุนูู
- ุงุณุชุฎุฏู Token Authentication
- ูู ุจุฅูุดุงุก ุฎุงุฏู backend ูุชูููุฏ Tokens
- ุฑุงุฌุน [Agora Token Guide](https://docs.agora.io/en/voice-calling/develop/authentication-workflow)

### ุฎุทุฃ "DEVICE_NOT_FOUND" - ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููููุฑูููู

ูุฐุง ุงูุฎุทุฃ ูุญุฏุซ ุนูุฏูุง ูุง ูุณุชุทูุน ุงููุชุตูุญ ุฅูุฌุงุฏ ูููุฑูููู ูุชุงุญ.

**ุงูุญููู:**
1. **ุชุญูู ูู ูุฌูุฏ ูููุฑูููู:**
   - ุชุฃูุฏ ูู ูุฌูุฏ ูููุฑูููู ูุชุตู ุจุฌูุงุฒู
   - ููููุจููุชุฑ ุงููุญูููุ ุงููููุฑูููู ุงููุฏูุฌ ุนุงุฏุฉ ููุฌูุฏ
   - ููููุจููุชุฑ ุงูููุชุจูุ ูุฏ ุชุญุชุงุฌ ูุชูุตูู ูููุฑูููู ุฎุงุฑุฌู

2. **ุงููุญ ุฃุฐููุงุช ุงููุชุตูุญ:**
   - ุงุถุบุท ุนูู ุฒุฑ "ุงุฎุชุจุฑ ุงููููุฑูููู" ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
   - ุนูุฏ ุธููุฑ ูุงูุฐุฉ ุงูุฅุฐูุ ุงุฎุชุฑ "ุงูุณูุงุญ" ุฃู "Allow"
   - ููุชุญูู ูู ุงูุฃุฐููุงุช ูู Chrome:
     - ุงุถุบุท ุนูู ุฃููููุฉ ุงูููู ูู ุดุฑูุท ุงูุนููุงู
     - ุชุฃูุฏ ูู ุฃู ุงููููุฑูููู ูุณููุญ

3. **ุฃุบูู ุงูุชุทุจููุงุช ุงูุฃุฎุฑู:**
   - ุชุฃูุฏ ูู ุนุฏู ุงุณุชุฎุฏุงู ุชุทุจูู ุขุฎุฑ ูููููุฑูููู
   - ุฃูุซูุฉ: Zoom, Teams, Discord, OBS
   - ุฃุบูู ูุฐู ุงูุชุทุจููุงุช ูุญุงูู ูุฑุฉ ุฃุฎุฑู

4. **ุฃุนุฏ ุชุดุบูู ุงููุชุตูุญ:**
   - ุฃุญูุงููุง ูุญู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุชุตูุญ ุงููุดููุฉ

5. **ุฌุฑุจ ูุชุตูุญ ุขุฎุฑ:**
   - Chrome ุฃู Edge ูููุถูู (ุฏุนู ุฃูุถู ูู WebRTC)

### ูุง ูุนูู ุงูุตูุช
- ุงุณุชุฎุฏู ุฒุฑ "ุงุฎุชุจุฑ ุงููููุฑูููู" ูุจู ุงูุจุฏุก
- ุชุฃูุฏ ูู ููุญ ุฅุฐู ุงููููุฑูููู
- ุชุญูู ูู App ID ุงูุตุญูุญ
- ุชุฃูุฏ ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
- ุฌุฑุจ ูุชุตูุญ ุขุฎุฑ (Chrome ูููุถูู)

### ูุดููุฉ ูู PWA
- PWA ูุนุทู ูู ูุถุน ุงูุชุทููุฑ
- ุงุณุชุฎุฏู `npm run build && npm start` ููุงุฎุชุจุงุฑ

### ุฃุฎุทุงุก Agora ุงูุฃุฎุฑู
- ุชุญูู ูู ุตุญุฉ App ID (ูุณุฎ ูุงูู ุจุฏูู ูุณุงูุงุช)
- ุชุฃูุฏ ูู ุชุนุทูู Certificate ููุงุฎุชุจุงุฑ
- ุฑุงุฌุน [Agora Documentation](https://docs.agora.io/)

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ููุชุงุญ ููุงุณุชุฎุฏุงู ุงูุญุฑ.

## ๐ค ุงููุณุงููุฉ

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง! ูุง ุชุชุฑุฏุฏ ูู ูุชุญ Issue ุฃู Pull Request.

## ๐ ุฑูุงุจุท ูููุฏุฉ

- [Agora Documentation](https://docs.agora.io/)
- [Next.js Documentation](https://nextjs.org/docs)
- [PWA Guide](https://web.dev/progressive-web-apps/)

---

ุตูุน ุจู โค๏ธ ุจุงุณุชุฎุฏุงู Next.js ู Agora
